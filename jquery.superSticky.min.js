(function($){$.fn.superSticky=function(method){var methods={init:function(options){this.superSticky.settings=$.extend({},this.superSticky.defaults,options);return this.each(function(){var $element=$(this),element=this;if(typeof($element.superSticky.settings.wrapper)==='undefined'){var $wrapper=$element.parent()}else{var $wrapper=$($element.superSticky.settings.wrapper),wrapper=$element.superSticky.settings.wrapper}var initialValues={'targetInitialPosition':$element.css('position'),'targetInitialTop':$element.css('top'),'targetInitialTopOffset':$element.offset().top,'targetInitialWrapperOffset':$element.offset().top-$wrapper.offset().top,'pageScrollElementBottomFlag':false,'lastScrollTop':0,'freezePositionFlag':false,'targetInitialLeftOffset':$element.offset().left};if($element.superSticky.settings.padding_top>initialValues.targetInitialTopOffset){$element.superSticky.settings.padding_top=initialValues.targetInitialTopOffset}helpers.scroll(element,initialValues);$(window).scroll(function(){helpers.scroll(element,initialValues)});$element.mutate('height',function(){helpers.scroll(element,initialValues)});$wrapper.mutate('height',function(){helpers.scroll(element,initialValues)})})},}var helpers={scroll:function(target,values){var $element=$(target),element=target;if(typeof($element.superSticky.settings.wrapper)==='undefined'){var $wrapper=$element.parent()}else{var $wrapper=$($element.superSticky.settings.wrapper),wrapper=$element.superSticky.settings.wrapper}values.scrollPosition=$(window).scrollTop();values.targetPosition=$element.offset().top;values.windowHeight=$(window).outerHeight();values.targetHeight=$element.outerHeight();values.wrapperHeight=$wrapper.outerHeight();values.wrapperPosition=$wrapper.offset().top;var pageTop=function(){$element.css('position',values.targetInitialPosition);$element.css('top',values.targetInitialTop);$element.css('left','auto')},pageBottom=function(){$element.css('position','relative');$element.css('top',values.wrapperHeight-$element.superSticky.settings.padding_bottom-values.targetInitialWrapperOffset-values.targetHeight);$element.css('left','auto')},pageScroll=function(){$element.css('position','fixed');$element.css('top',$element.superSticky.settings.padding_top);values.freezePositionFlag=false;$element.css('left',values.targetInitialLeftOffset)},pageScrollElementBottom=function(){$element.css('position','fixed');$element.css('top',(values.windowHeight-(values.targetHeight+$element.superSticky.settings.padding_bottom)));values.freezePositionFlag=false;$element.css('left',values.targetInitialLeftOffset)},pageScrollElementMiddle=function(){$element.css('position','relative');if(!values.freezePositionFlag){values.freezePositionFlag=values.targetPosition-values.targetInitialTopOffset;$element.css('top',values.freezePositionFlag);$element.css('left','auto')}}if(values.targetInitialTopOffset+$element.superSticky.settings.padding_bottom+values.targetHeight-values.wrapperPosition<values.wrapperHeight){if(values.scrollPosition<=values.targetInitialTopOffset-$element.superSticky.settings.padding_top){pageTop()}else{if(values.windowHeight<=values.targetHeight+$element.superSticky.settings.padding_top+$element.superSticky.settings.padding_bottom){if(values.scrollPosition+values.targetHeight-((values.targetHeight+$element.superSticky.settings.padding_bottom)-values.windowHeight)>=values.wrapperHeight+values.wrapperPosition-$element.superSticky.settings.padding_bottom){pageBottom()}else{if(values.scrollPosition>values.lastScrollTop){if(values.scrollPosition>=values.targetPosition+((values.targetHeight+$element.superSticky.settings.padding_bottom)-values.windowHeight)){values.pageScrollElementBottomFlag=true;pageScrollElementBottom()}else{pageScrollElementMiddle()}}else{if(values.scrollPosition<=values.targetPosition-$element.superSticky.settings.padding_top&&values.pageScrollElementBottomFlag){pageScroll()}else{pageScrollElementMiddle()}}}values.lastScrollTop=values.scrollPosition}else{if(values.scrollPosition+values.targetHeight+$element.superSticky.settings.padding_top>=values.wrapperHeight+values.wrapperPosition-$element.superSticky.settings.padding_bottom){pageBottom()}else{pageScroll()}}}}}}if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof method==='object'||!method){return methods.init.apply(this,arguments)}else{$.error('Method "'+method+'" does not exist in the superSticky plugin!')}}$.fn.superSticky.defaults={padding_top:0,padding_bottom:0}$.fn.superSticky.settings={}})(jQuery);mutate_event_stack=[{name:'width',handler:function(elem){n={el:elem}if(!$(n.el).data('mutate-width'))$(n.el).data('mutate-width',$(n.el).width());if($(n.el).data('mutate-width')&&$(n.el).width()!=$(n.el).data('mutate-width')){$(n.el).data('mutate-width',$(n.el).width());return true}return false}},{name:'height',handler:function(n){element=n;if(!$(element).data('mutate-height'))$(element).data('mutate-height',$(element).height());if($(element).data('mutate-height')&&$(element).height()!=$(element).data('mutate-height')){$(element).data('mutate-height',$(element).height());return true}}},{name:'top',handler:function(n){if(!$(n).data('mutate-top'))$(n).data('mutate-top',$(n).css('top'));if($(n).data('mutate-top')&&$(n).css('top')!=$(n).data('mutate-top')){$(n).data('mutate-top',$(n).css('top'));return true}}},{name:'bottom',handler:function(n){if(!$(n).data('mutate-bottom'))$(n).data('mutate-bottom',$(n).css('bottom'));if($(n).data('mutate-bottom')&&$(n).css('bottom')!=$(n).data('mutate-bottom')){$(n).data('mutate-bottom',$(n).css('bottom'));return true}}},{name:'right',handler:function(n){if(!$(n).data('mutate-right'))$(n).data('mutate-right',$(n).css('right'));if($(n).data('mutate-right')&&$(n).css('right')!=$(n).data('mutate-right')){$(n).data('mutate-right',$(n).css('right'));return true}}},{name:'left',handler:function(n){if(!$(n).data('mutate-left'))$(n).data('mutate-left',$(n).css('left'));if($(n).data('mutate-left')&&$(n).css('left')!=$(n).data('mutate-left')){$(n).data('mutate-left',$(n).css('left'));return true}}},{name:'hide',handler:function(n){if($(n).is(':hidden'))return true}},{name:'show',handler:function(n){if($(n).is(':visible'))return true}},{name:'scrollHeight',handler:function(n){if(!$(n).data('prev-scrollHeight'))$(n).data('prev-scrollHeight',$(n)[0].scrollHeight);if($(n).data('prev-scrollHeight')&&$(n)[0].scrollHeight!=$(n).data('prev-scrollHeight')){$(n).data('prev-scrollHeight',$(n)[0].scrollHeight);return true}}},{name:'scrollWidth',handler:function(n){if(!$(n).data('prev-scrollWidth'))$(n).data('prev-scrollWidth',$(n)[0].scrollWidth);if($(n).data('prev-scrollWidth')&&$(n)[0].scrollWidth!=$(n).data('prev-scrollWidth')){$(n).data('prev-scrollWidth',$(n)[0].scrollWidth);return true}}},{name:'scrollTop',handler:function(n){if(!$(n).data('prev-scrollTop'))$(n).data('prev-scrollTop',$(n)[0].scrollTop());if($(n).data('prev-scrollTop')&&$(n)[0].scrollTop()!=$(n).data('prev-scrollTop')){$(n).data('prev-scrollTop',$(n)[0].scrollTop());return true}}},{name:'scrollLeft',handler:function(n){if(!$(n).data('prev-scrollLeft'))$(n).data('prev-scrollLeft',$(n)[0].scrollLeft());if($(n).data('prev-scrollLeft')&&$(n)[0].scrollLeft()!=$(n).data('prev-scrollLeft')){$(n).data('prev-scrollLeft',$(n)[0].scrollLeft());return true}}}];(function($){mutate={speed:1,event_stack:mutate_event_stack,stack:[],events:{},add_event:function(evt){mutate.events[evt.name]=evt.handler},add:function(event_name,selector,callback,false_callback){mutate.stack[mutate.stack.length]={event_name:event_name,selector:selector,callback:callback,false_callback:false_callback}}};function reset(){var parent=mutate;if(parent.event_stack!='undefined'&&parent.event_stack.length){$.each(parent.event_stack,function(j,k){mutate.add_event(k)})}parent.event_stack=[];$.each(parent.stack,function(i,n){$(n.selector).each(function(a,b){if(parent.events[n.event_name](b)===true){if(n['callback'])n.callback(b,n)}else{if(n['false_callback'])n.false_callback(b,n)}})})setTimeout(reset,mutate.speed)}reset();$.fn.extend({mutate:function(){var event_name=false,callback=arguments[1],selector=this,false_callback=arguments[2]?arguments[2]:function(){};if(arguments[0].toLowerCase()=='extend'){mutate.add_event(callback);return this}$.each($.trim(arguments[0]).split(' '),function(i,n){event_name=n;mutate.add(event_name,selector,callback,false_callback)});return this}})})(jQuery);